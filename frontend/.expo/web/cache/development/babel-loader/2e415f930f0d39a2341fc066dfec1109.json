{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport styles from \"../../styles/styles\";\nimport { LineChart, BarChart, PieChart, ProgressChart, ContributionGraph, StackedBarChart } from \"react-native-chart-kit\";\nimport axiosInstance from \"../../services/AxiosInstance\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ExpensesChart = function ExpensesChart(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var getRandomColor = function getRandomColor() {\n    var r = Math.random() * 0.75 * 255 + 255 * 0.2;\n    var g = Math.random() * 0.75 * 255 + 255 * 0.23;\n    var b = Math.random() * 0.75 * 255 + 254 * 0.5;\n    return \"rgb(\" + parseInt(r) + \", \" + parseInt(g) + \", \" + parseInt(b) + \")\";\n  };\n\n  useEffect(function () {\n    setData([{\n      name: \"food\",\n      amount: 400,\n      color: 'rgba(131, 167, 234, 1)',\n      legendFontColor: '#7F7F7F',\n      legendFontSize: 15\n    }, {\n      name: \"travel\",\n      amount: 40,\n      color: '#F00',\n      legendFontColor: '#7F7F7F',\n      legendFontSize: 15\n    }, {\n      name: \"education\",\n      amount: 34,\n      color: 'rgb(0, 0, 255)',\n      legendFontColor: '#7F7F7F',\n      legendFontSize: 15\n    }]);\n    axiosInstance.get(\"/stats/spent\").then(function (res) {\n      var filteredData = {\n        categories: {}\n      };\n      res.data.map(function (item) {\n        if (filteredData.categories.hasOwnProperty(item.category)) {\n          filteredData.categories[item.category] += item.amount;\n        } else {\n          filteredData.categories[item.category] = item.amount;\n        }\n      });\n      var finalData = [];\n      Object.keys(filteredData.categories).map(function (key) {\n        console.log(getRandomColor());\n        finalData.push({\n          name: key,\n          amount: filteredData.categories[key],\n          legendFontColor: '#7F7F7F',\n          legendFontSize: 15,\n          color: getRandomColor()\n        });\n      });\n      setData(finalData);\n      setLoading(false);\n    }).catch(function (e) {\n      console.log(e);\n    });\n  }, []);\n\n  var logOut = function logOut() {\n    var f = function f() {\n      AsyncStorage.setItem(\"x-auth-token\", \"\").then(function () {\n        props.reloadApp();\n      }).catch(function (e) {\n        console.log(e);\n      });\n    };\n\n    f();\n  };\n\n  var dataExists = function dataExists() {\n    return JSON.stringify(data) != JSON.stringify([]);\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: [styles.card, {\n      backgroundColor: \"white\"\n    }],\n    children: [loading ? _jsx(ActivityIndicator, {}) : dataExists() ? _jsx(PieChart, {\n      data: data,\n      width: Dimensions.get(\"window\").width * 0.8,\n      height: 220,\n      chartConfig: {\n        backgroundColor: \"#e26a00\",\n        backgroundGradientFrom: \"#fb8c00\",\n        backgroundGradientTo: \"#ffa726\",\n        decimalPlaces: 2,\n        color: function color() {\n          var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n          return \"rgba(255, 255, 255, \" + opacity + \")\";\n        },\n        labelColor: function labelColor() {\n          var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n          return \"rgba(255, 255, 255, \" + opacity + \")\";\n        },\n        style: {\n          borderRadius: 16\n        },\n        propsForDots: {\n          r: \"6\",\n          strokeWidth: \"2\",\n          stroke: \"#ffa726\"\n        }\n      },\n      accessor: \"amount\"\n    }) : _jsx(Text, {\n      children: \"No data to display\"\n    }), _jsx(Button, {\n      title: \"Log Out\",\n      onPress: logOut\n    })]\n  });\n};\n\nexport default ExpensesChart;","map":{"version":3,"sources":["E:/Documents/Semester 7/MAD/Project/client/components/Stats/ExpensesChart.jsx"],"names":["useEffect","useState","AsyncStorage","styles","LineChart","BarChart","PieChart","ProgressChart","ContributionGraph","StackedBarChart","axiosInstance","ExpensesChart","props","data","setData","loading","setLoading","getRandomColor","r","Math","random","g","b","parseInt","name","amount","color","legendFontColor","legendFontSize","get","then","res","filteredData","categories","map","item","hasOwnProperty","category","finalData","Object","keys","key","console","log","push","catch","e","logOut","f","setItem","reloadApp","dataExists","JSON","stringify","card","backgroundColor","Dimensions","width","backgroundGradientFrom","backgroundGradientTo","decimalPlaces","opacity","labelColor","style","borderRadius","propsForDots","strokeWidth","stroke"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react'\r\nimport {View, SafeAreaView, Dimensions, ActivityIndicator, Button, Text} from 'react-native'\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport styles from '../../styles/styles'\r\nimport {\r\n    LineChart,\r\n    BarChart,\r\n    PieChart,\r\n    ProgressChart,\r\n    ContributionGraph,\r\n    StackedBarChart\r\n  } from \"react-native-chart-kit\";\r\nimport axiosInstance from '../../services/AxiosInstance'\r\n\r\nconst ExpensesChart = (props)=>{\r\n    \r\n    \r\n    const [data, setData] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const getRandomColor = ()=>{\r\n        let r = Math.random()*0.75*255 + 255*0.2\r\n        let g = Math.random()*0.75*255 + 255 *0.23\r\n        let b = Math.random()*0.75*255 + 254*0.5\r\n        return `rgb(${parseInt(r)}, ${parseInt(g)}, ${parseInt(b)})`\r\n    }\r\n\r\n    useEffect(()=>{\r\n        setData( [\r\n           {name:\"food\", amount:400,color: 'rgba(131, 167, 234, 1)', legendFontColor: '#7F7F7F', legendFontSize: 15},\r\n           {name:\"travel\", amount:40,color: '#F00', legendFontColor: '#7F7F7F', legendFontSize: 15 },\r\n           {name:\"education\", amount:34,color: 'rgb(0, 0, 255)', legendFontColor: '#7F7F7F', legendFontSize: 15 }\r\n        ])\r\n\r\n        axiosInstance.get(\"/stats/spent\").then(res=>{\r\n            let filteredData = {\r\n                categories: {  },\r\n                \r\n            }\r\n            res.data.map(item=>{\r\n                if(filteredData.categories.hasOwnProperty(item.category)){\r\n                    filteredData.categories[item.category] += item.amount\r\n                }else{\r\n                    filteredData.categories[item.category] = item.amount\r\n                }\r\n\r\n            })\r\n            let finalData = []\r\n            Object.keys(filteredData.categories).map(key=>{\r\n                console.log(getRandomColor())\r\n                finalData.push({\r\n                    name:key,\r\n                    amount: filteredData.categories[key],\r\n                    legendFontColor: '#7F7F7F', legendFontSize: 15,\r\n                    color:getRandomColor()\r\n                })\r\n            })\r\n            setData(finalData)\r\n            setLoading(false)\r\n\r\n            // setLabels(Object.keys(filteredData.dates))\r\n            // setData(Object.values(filteredData.dates))\r\n            // setLoading(false)\r\n            \r\n        }).catch(e=>{\r\n            console.log(e)\r\n        })\r\n    },[])\r\n    const logOut = ()=>{\r\n        const f = ()=>{\r\n            AsyncStorage.setItem(\"x-auth-token\",\"\").then(()=>{\r\n              props.reloadApp()\r\n            }).catch(e=>{\r\n                console.log(e)\r\n            })\r\n        }\r\n        f()\r\n            \r\n    }\r\n    const dataExists =()=>{\r\n        return JSON.stringify(data) != JSON.stringify([])\r\n    }\r\n    return (\r\n        <SafeAreaView style={[styles.card, {backgroundColor:\"white\"}]}> \r\n                { loading ?<ActivityIndicator />: dataExists()? <PieChart\r\n                data={data}\r\n                width={Dimensions.get(\"window\").width*0.8} // from react-native\r\n                height={220}\r\n                chartConfig={{\r\n                    backgroundColor: \"#e26a00\",\r\n                    backgroundGradientFrom: \"#fb8c00\",\r\n                    backgroundGradientTo: \"#ffa726\",\r\n                    decimalPlaces: 2, // optional, defaults to 2dp\r\n                    color: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\r\n                    labelColor: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\r\n                    style: {\r\n                        borderRadius: 16\r\n                    },\r\n                    propsForDots: {\r\n                        r: \"6\",\r\n                        strokeWidth: \"2\",\r\n                        stroke: \"#ffa726\"\r\n                    }\r\n                    }}\r\n                accessor=\"amount\"\r\n               \r\n              />:<Text>No data to display</Text>}\r\n              <Button title=\"Log Out\" onPress={logOut}/>\r\n        </SafeAreaView>        \r\n\r\n    )\r\n}\r\nexport default ExpensesChart"]},"metadata":{},"sourceType":"module"}