{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport Login from \"./components/Login/Login\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TabNavigatorContainer from \"./components/Navigation/TabNavigationContainer\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { firebase } from \"./firebase/fb-config.js\";\nimport axiosInstance from \"./services/AxiosInstance\";\nimport styles from \"./styles/styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar App = function App() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      authState = _useState2[0],\n      setAuthState = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      count = _useState6[0],\n      setCount = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      token = _useState8[0],\n      setToken = _useState8[1];\n\n  useEffect(function () {\n    var f = function _callee() {\n      var token;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('x-auth-token'));\n\n            case 2:\n              token = _context.sent;\n              setToken(token);\n\n              if (token !== null) {\n                axiosInstance.post('/users/verify').then(function (res) {\n                  setLoading(false);\n                  setAuthState(true);\n                }).catch(function (e) {\n                  setAuthState(false);\n                  setLoading(false);\n                });\n              } else {\n                setLoading(false);\n                setAuthState(false);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    f();\n  }, []);\n\n  var reloadApp = function reloadApp() {\n    console.log(\"reload app\");\n\n    var f = function _callee2() {\n      var token;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('x-auth-token'));\n\n            case 2:\n              token = _context2.sent;\n\n              if (token !== null) {\n                axiosInstance.post('/users/verify', {}, {\n                  headers: {\n                    \"x-auth-token\": token\n                  }\n                }).then(function (res) {\n                  console.log(res.data);\n                  setLoading(false);\n                  setAuthState(true);\n                }).catch(function (e) {\n                  console.log(e.response.data);\n                  setAuthState(false);\n                  setLoading(false);\n                });\n              } else {\n                setLoading(false);\n                setAuthState(false);\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    f();\n  };\n\n  if (loading) {\n    return _jsxs(View, {\n      style: {\n        marginTop: \"45%\"\n      },\n      children: [_jsx(Text, {\n        style: {\n          textAlign: \"center\"\n        },\n        children: \"Loading..\"\n      }), _jsx(ActivityIndicator, {\n        size: \"large\"\n      })]\n    });\n  } else {\n    return authState == true ? _jsx(TabNavigatorContainer, {\n      reloadApp: reloadApp\n    }) : _jsx(ImageBackground, {\n      source: {\n        uri: 'https://www.amongtech.com/wp-content/uploads/G3-Wallpaper-for-Galaxy-Note-4.jpg'\n      },\n      resizeMode: \"cover\",\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      children: _jsx(Login, {\n        reloadApp: reloadApp\n      })\n    });\n  }\n};\n\nexport default App;","map":{"version":3,"sources":["E:/Documents/Semester 7/MAD/Project/client/App.js"],"names":["React","useState","useEffect","Login","TabNavigatorContainer","AsyncStorage","firebase","axiosInstance","styles","App","authState","setAuthState","loading","setLoading","count","setCount","token","setToken","f","getItem","post","then","res","catch","e","reloadApp","console","log","headers","data","response","marginTop","textAlign","uri","width","height"],"mappings":"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","sourcesContent":["import React, { useState , useEffect} from 'react';\nimport Login from './components/Login/Login'\nimport { ActivityIndicator, Text, View, ImageBackground, Alert } from 'react-native';\nimport TabNavigatorContainer from './components/Navigation/TabNavigationContainer'\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n// fb\nimport {firebase} from './firebase/fb-config.js'\nimport axiosInstance from './services/AxiosInstance'\nimport styles from './styles/styles'\n// const Drawer = createDrawerNavigator()\nconst App = ()=>{\n  \n  const [authState, setAuthState] = useState(false)//loading, auth info object or null\n  const [loading, setLoading] = useState(true)\n  const [count, setCount] = useState(0)\n  const [token, setToken] = useState(null)\n  useEffect(()=>{\n    const f = async ()=>{\n      const token = await AsyncStorage.getItem('x-auth-token')\n      setToken(token)\n      // console.log(token)\n      if (token!== null){\n      axiosInstance.post('/users/verify').then(res=>{\n        setLoading(false)\n        setAuthState(true)\n      }).catch(e=>{\n        setAuthState(false)\n        setLoading(false)\n\n      })\n    }else{\n      setLoading(false)\n      setAuthState(false)\n\n    }\n    }\n    f()\n  },[])\n  const reloadApp = ()=>{\n    console.log(\"reload app\")\n    const f = async ()=>{\n      const token = await AsyncStorage.getItem('x-auth-token')\n      if (token!== null){\n\n      axiosInstance.post('/users/verify',{}, {headers:{\n        \"x-auth-token\":token\n      }}).then(res=>{\n        console.log(res.data)\n\n        setLoading(false)\n        setAuthState(true)\n      }).catch(e=>{\n        console.log(e.response.data)\n        setAuthState(false)\n        setLoading(false)\n\n      })\n    }else{\n      setLoading(false)\n      setAuthState(false)\n\n    }\n    }\n    f()\n  }\n  if (loading){\n    return <View style={{marginTop:\"45%\"}}><Text style={{textAlign:\"center\"}}>Loading..</Text><ActivityIndicator size=\"large\" /></View>\n  }else{\n  return authState==true?<TabNavigatorContainer  reloadApp={reloadApp}/>:\n  <ImageBackground source={{uri:'https://www.amongtech.com/wp-content/uploads/G3-Wallpaper-for-Galaxy-Note-4.jpg'}} resizeMode=\"cover\" style={{width: '100%', height: '100%'}} >\n     <Login reloadApp={reloadApp}\n  /></ImageBackground>\n  }  \n    \n  }\nexport default App "]},"metadata":{},"sourceType":"module"}